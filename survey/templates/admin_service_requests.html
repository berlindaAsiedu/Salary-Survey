{% extends "admin_layout.html" %}

{% block header %} 
Service Requests
{% endblock header %}
{% block content %}

<div class="col d-flex justify-content-center">
    <div class="input-group" style="max-width: 400px;">
        <input type="search" id="search_request" class="form-control" placeholder="Search Request">
        <div class="input-group-append">
          <button class="btn btn-secondary" type="button">
            <i class="fa fa-search"></i>
          </button>
        </div>
      </div>
</div>
<div class="col">
    <div class="form-check form-check-inline">
       
        <label class="form-check-label " for="">Select the type of request</label>
      </div>
    <div class="form-check form-check-inline">
        <input class="filter" type="checkbox" id="filter_corporate" value="Corporate" checked>
        <label class="form-check-label " for="filter_corporate">Corporate Clients</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="filter" type="checkbox" id="filter_individual" value="Individual" checked>
        <label class="form-check-label" for="filter_individual">Individual Clients</label>
      </div>
      
</div>

<div id="requests_all">
    <table class="table table-striped" id="all_requests_table">
	    <thead class="bg-secondary text-white">
	        <tr>
	            <td>#</td>
	            <td>Name</td>
	            <td>Client Type</td>
                <td>Email</td>
                <td>Organisation</td>
	            <td>Status</td>
	            <td></td>
	        </tr>
	        <tbody>
                <tr>
                    <td>1</td>
                    <td>Corporate</td>
	                <td>John Doe</td>
	                <td>Kohl Cosmetics</td>
                    <td>johndoe@kohlcosmetics.com</td>
                    
	                <td>Opened</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>
	            </tr>
	            <tr>
                    <td>2</td>
                    <td>Corporate</td>
	                <td>Mark Hart</td>
	                <td>Wikk Trucks</td>
                    <td>jmarkhart@wikkTrucks.com</td>
                    
	                <td>Closed</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>
	            </tr>
	            <tr>
                    <td>3</td>
                    <td>Corporate</td>
	                <td>Paul Cook</td>
	                <td>NALM Foods</td>
                    <td>paulcook@nalmfoods.com</td>
                   
	                <td>Closed</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>    
	            </tr>
	            <tr>
                    <td>4</td>
                    <td>Individual</td>
                    <td>John Doe</td>
                    <td>N/A</td>
                    <td>johndoe@kohlcosmetics.com</td>
                    
	                <td>Opened</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>
	            </tr>
	            <tr>
                    <td>5</td>
                    <td>Individual</td>
                    <td>Mark Hart</td>
                    <td>N/A</td>
                    <td>jmarkhart@wikkTrucks.com</td>
                    
	                <td>Closed</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>
	            </tr>
	            <tr>
                    <td>6</td>
                    <td>Individual</td>
                    <td>Paul Cook</td>
                    <td>N/A</td>
                    <td>paulcook@nalmfoods.com</td>
                    
	                <td>Closed</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>    
	            </tr>
	        </tbody>
	    </thead>
	</table>
</div>
<div class="tab-content request-filter-inactive" id="requests_corporate">
	<table class="table table-striped" id="corporate_requests_table">
	    <thead class="bg-secondary text-white">
	        <tr>
	            <td>#</td>
	            <td>Name</td>
	            <td>Organisation</td>
	            <td>Job Title</td>
	            <td>Email</td>
	            <td>Status</td>
	            <td></td>
	        </tr>
	        <tbody>
	            <tr>
	                <td>1</td>
	                <td>John Doe</td>
	                <td>Kohl Cosmetics</td>
	                <td>HR Officer</td>
	                <td>johndoe@kohlcosmetics.com</td>
	                <td>Opened</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>
	            </tr>
	            <tr>
	                <td>2</td>
	                <td>Mark Hart</td>
	                <td>Wikk Trucks</td>
	                <td>HR Manager</td>
	                <td>jmarkhart@wikkTrucks.com</td>
	                <td>Closed</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>
	            </tr>
	            <tr>
	                <td>3</td>
	                <td>Paul Cook</td>
	                <td>NALM Foods</td>
	                <td>HR Manager</td>
	                <td>paulcook@nalmfoods.com</td>
	                <td>Closed</td>
	                <td><i class="fas fa-eye benchmark-eye" data-toggle="modal" data-target="#request_detail" ></i></td>    
	            </tr>
	        </tbody>
	    </thead>
	</table>
</div>

<!-- Modal to display details of a request -->
<div class="modal fade " id="request_detail" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Service Request</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-lg-6 md-12">
                    <p>
                        <b>First Name: </b>
                        
                        John
                    </p>
                </div>
                <div class="col-lg-6 md-12">
                    <p>
                        <b>Last Name: </b>
                        Doe
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 md-12">
                    <p>
                        <b>Organisation: </b>
                        
                        Kohl Cosmetics
                    </p>
                </div>
                <div class="col-lg-6 md-12">
                    <p>
                        <b>Job Title: </b>
                        HR Office
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 md-12">
                    <p>
                        <b>Email: </b>
                        johndoe@kohlcosmetics.com
                    </p>
                </div>
                <div class="col-lg-6 md-12">
                    <p>
                        <b>Mobile Number: </b>
                        0501234567
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 md-12">
                    <p>
                        <b>Description of Request: </b>
                        <br>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Porttitor eget dolor morbi non. Adipiscing elit pellentesque habitant morbi tristique senectus et netus et. Augue eget arcu dictum varius duis at consectetur lorem donec. Suspendisse sed nisi lacus sed. Mi proin sed libero enim sed faucibus. Mi proin sed libero enim sed faucibus turpis in. Faucibus a pellentesque sit amet porttitor eget dolor morbi. Orci phasellus egestas tellus rutrum tellus pellentesque. Ipsum a arcu cursus vitae congue mauris rhoncus aenean. Quis varius quam quisque id diam vel quam. Interdum velit euismod in pellentesque. Sagittis purus sit amet volutpat. Lorem dolor sed viverra ipsum nunc aliquet bibendum enim facilisis. Tincidunt ornare massa eget egestas purus viverra.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="comment">Review Comment</label>
                        <textarea name="comment" id="comment" cols="" rows="3" class="form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select name="status" id="status" class="form-control">
                            <option value="Opened" selected>Opened</option>
                            <option value="Closed">Closed</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
         
          <button class="btn btn-outline-success" id="add_benchmark" data-dismiss="modal">Save</button>
          
        </div>
      </div>
    </div>
  </div>

  <style>


    
    .request-filter-active{
        display: block;
    }
    .request-filter-inactive{
        display: none;
    }
    .filter{
        width: 20px;
        height: 20px;
        margin: 30px;
        color: red;
    }
    </style>
<script>
        var filtered = [];
   $(document).ready(function() {
  
    $.fn.dataTable.ext.search.push(

    function( settings, searchData, index, rowData, counter ) {
        if (filtered.includes(searchData[1])) {
             return true;
        }
        return false ;
    }
);
  
  var requestsTable = $('#all_requests_table').DataTable({sDom: 'lrtip', 'bLengthChange': false});
  
  $('.filter').on('change', function() {

    var val = $(this).val();
    var checked = $(this).prop('checked');
    var index = filtered.indexOf( val );
    
    if (checked && index === -1) {
      filtered.push(val);
    } else if (!checked && index > -1) {
      filtered.splice(index, 1);
    }
    requestsTable.draw();
  });
  $('#filter_corporate').prop('checked', true)
  $('#filter_corporate').trigger('change')
  $('#filter_individual').prop('checked', true)
  $('#filter_individual').trigger('change')
    $('#search_request').keyup(function(){
        requestsTable.search($(this).val()).draw() ;
    })
} );




    </script>
{% endblock content %}